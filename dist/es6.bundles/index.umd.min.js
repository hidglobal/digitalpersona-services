!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@digitalpersona/core")):"function"==typeof define&&define.amd?define(["exports","@digitalpersona/core"],t):t(((e=e||self).dp=e.dp||{},e.dp.services=e.dp.services||{}),e.dp.core)}(this,function(e,t){"use strict";var n,r,s,i,o,u;(n=e.ResourceActions||(e.ResourceActions={}))[n.Read=0]="Read",n[n.Write=1]="Write",n[n.Delete=2]="Delete";class l extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,new.target.prototype)}static fromServiceFault(e){return new l(e.error_code,e.description)}isHttpError(){return this.code>=400&&this.code<600}}(r=e.AuthenticationStatus||(e.AuthenticationStatus={}))[r.Error=0]="Error",r[r.Continue=1]="Continue",r[r.Completed=2]="Completed";class a{constructor(e,t,n){this.href=a.create(e,t,n)}static getSanitizedQuery(e){return Object.keys(e).map(t=>[t,e[t]].map(encodeURIComponent).join("=")).join("&")}static create(e,t,n){return e+(t?`/${encodeURIComponent(t)}`:"")+(n?`?${a.getSanitizedQuery(n)}`:"")}}class c{constructor(e,t){this.defaultRequest={cache:"no-cache",mode:"cors",headers:{"Content-Type":"application/json;charset=utf-8",Accept:"application/json"}},this.endpointUrl=e,this.defaultRequest=t||this.defaultRequest}static handleResponse(e){return e.ok?e.json():c.handleError(e)}static handleError(e){if(404===e.status)return e.json().then(t=>{throw t?new l(t.error_code,t.description):new l(e.status,e.statusText)});throw new l(e.status,e.statusText)}get(e,t,n){return fetch(a.create(this.endpointUrl,e,t),Object.assign({},this.defaultRequest,n,{method:"GET"})).then(c.handleResponse)}post(e,t,n,r){return fetch(a.create(this.endpointUrl,e,t),Object.assign({},this.defaultRequest,r,{method:"POST"},n?{body:JSON.stringify(n)}:{})).then(c.handleResponse)}put(e,t,n,r){return fetch(a.create(this.endpointUrl,e,t),Object.assign({},this.defaultRequest,r,{method:"PUT"},n?{body:JSON.stringify(n)}:{})).then(c.handleResponse)}del(e,t,n,r){return fetch(a.create(this.endpointUrl,e,t),Object.assign({},this.defaultRequest,r,{method:"DELETE"},n?{body:JSON.stringify(n)}:{})).then(c.handleResponse)}ping(e="Ping"){return fetch(a.create(this.endpointUrl,e),Object.assign({},this.defaultRequest,{method:"GET"})).then(e=>e.ok).catch(e=>!1)}}class d{constructor(e){this.endpoint=new c(e)}Ping(){return this.endpoint.ping()}}(s=e.Database||(e.Database={})).AD="AD",s.LDS="ADLDS";(i=e.AttributeAction||(e.AttributeAction={}))[i.Clear=1]="Clear",i[i.Update=2]="Update",i[i.Append=3]="Append",i[i.Delete=4]="Delete",(o=e.AttributeType||(e.AttributeType={}))[o.Boolean=1]="Boolean",o[o.Integer=2]="Integer",o[o.String=3]="String",o[o.Blob=4]="Blob";(u=e.TriggerName||(e.TriggerName={})).Behavior="behavior",u.IP="ip",u.Device="device",u.AltusInstalled="altusInstalled",u.Computer="computer",u.Domain="domain",u.User="user",u.InsideFirewall="insideFirewall",u.RemoteSession="remoteSession";e.Attribute=class{constructor(e,t){this.type=e,this.values=t}},e.AuthService=class extends d{constructor(e){super(e)}GetUserCredentials(e){return this.endpoint.get("GetUserCredentials",{user:e.name,type:e.type}).then(e=>e.GetUserCredentialsResult)}GetEnrollmentData(e,t){return this.endpoint.get("GetEnrollmentData",{user:e.name,type:e.type,cred_id:t}).then(e=>e.GetEnrollmentDataResult)}Identify(e){return this.endpoint.post("IdentifyUser",null,{credential:e}).then(e=>e.IdentifyUserResult)}Authenticate(e,n){return e instanceof t.Ticket?this.endpoint.post("AuthenticateUserTicket",null,{ticket:e,credential:n}).then(e=>e.AuthenticateUserTicketResult):this.endpoint.post("AuthenticateUser",null,{user:e,credential:n}).then(e=>e.AuthenticateUserResult)}CustomAction(e,t,n,r){return this.endpoint.post("CustomAction",null,{actionId:e,ticket:t,user:n,credential:r}).then(e=>e.CustomActionResult)}CreateAuthentication(e,n){return e instanceof t.Ticket?this.endpoint.post("CreateTicketAuthentication",null,{ticket:e,credentialId:n}).then(e=>e.CreateTicketAuthenticationResult):this.endpoint.post("CreateUserAuthentication",null,{user:e,credentialId:n}).then(e=>e.CreateUserAuthenticationResult)}ContinueAuthentication(e,t){return this.endpoint.post("ContinueAuthentication",null,{authId:e,authData:t}).then(e=>e.ContinueAuthenticationResult)}DestroyAuthentication(e){return this.endpoint.del("DestroyAuthentication",null,{authId:e})}},e.AuthenticationData=class{},e.ClaimRequest=class{constructor(e,t,n){this.name=e,this.db=t,this.attr=n}},e.ClaimsService=class extends d{constructor(e){super(e)}GetConfiguredClaims(e){return this.endpoint.post("GetConfiguredClaims",null,{ticket:e}).then(e=>e.GetConfiguredClaimsResult.ticket)}GetClaims(e,t){return this.endpoint.post("GetClaims",null,{ticket:e,request:t}).then(e=>e.GetClaimsResult.ticket)}},e.ContextualInfo=class{},e.EnrollService=class extends d{constructor(e){super(e)}GetUserCredentials(e){return this.endpoint.get("GetUserCredentials",{user:e.name,type:e.type}).then(e=>e.GetUserCredentialsResult)}GetEnrollmentData(e,t){return this.endpoint.get("GetEnrollmentData",{user:e.name,type:e.type,cred_id:t}).then(e=>e.GetEnrollmentDataResult)}CreateUser(e,t,n){return this.endpoint.put("CreateUser",null,{secOfficer:e,user:t,password:n})}DeleteUser(e,t){return this.endpoint.del("DeleteUser",null,{secOfficer:e,user:t})}EnrollUserCredentials(e,t,n){return this.endpoint.put("EnrollUserCredentials",null,{secOfficer:e,owner:t,credential:n})}DeleteUserCredentials(e,t,n){return this.endpoint.del("DeleteUserCredentials",null,{secOfficer:e,owner:t,credential:n})}EnrollAltusUserCredentials(e,t,n){return this.endpoint.put("EnrollAltusUserCredentials",null,{secOfficer:e,user:t,credential:n})}DeleteAltusUserCredentials(e,t,n){return this.endpoint.del("DeleteAltusUserCredentials",null,{secOfficer:e,user:t,credential:n})}GetUserAttribute(e,t,n){return this.endpoint.post("GetUserAttribute",null,{ticket:e,user:t,attributeName:n}).then(e=>e.GetUserAttributeResult)}PutUserAttribute(e,t,n,r,s){return this.endpoint.put("PutUserAttribute",null,{ticket:e,user:t,attributeName:n,action:r,attributeData:s})}UnlockUser(e,t){return this.endpoint.post("UnlockUser",null,{user:e,credential:t})}CustomAction(e,t,n,r){return this.endpoint.post("CustomAction",null,{ticket:e,user:t,credential:n,actionId:r}).then(e=>e.CustomActionResult)}IsEnrollmentAllowed(e,t,n){return this.endpoint.post("IsEnrollmentAllowed",null,{secOfficer:e,user:t,credentialId:n})}},e.PolicyService=class extends d{constructor(e){super(e)}GetPolicyInfo(e,t,n,r){return this.endpoint.post("GetPolicyInfo",null,{user:e,resourceUri:t,action:n,info:r}).then(e=>e.GetPolicyInfoResult)}},e.SecretService=class extends d{constructor(e){super(e)}GetAuthPolicy(e,t,n){return this.endpoint.get("GetAuthPolicy",{user:e.name,type:e.type,secretName:t,action:n}).then(e=>e.GetAuthPolicyResult)}DoesSecretExist(e,t){return this.endpoint.get("DoesSecretExist",{user:e.name,type:e.type,secretName:t}).then(e=>e.DoesSecretExistResult)}ReadSecret(e,t){return this.endpoint.post("ReadSecret",null,{ticket:e,secretName:t}).then(e=>e.ReadSecretResult)}WriteSecret(e,t,n){return this.endpoint.put("WriteSecret",null,{ticket:e,secretName:t,secretData:n})}DeleteSecret(e,t){return this.endpoint.del("DeleteSecret",null,{ticket:e,secretName:t})}},e.ServiceError=l,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.min.js.map
